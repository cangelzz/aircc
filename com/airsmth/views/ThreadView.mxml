<?xml version="1.0" encoding="utf-8"?>
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009" 
    xmlns:s="library://ns.adobe.com/flex/spark" 
    viewActivate="init()">
    <s:layout>
        <s:VerticalLayout paddingTop="10"/>
    </s:layout>
        
    <fx:Script>
        <![CDATA[
            import spark.events.IndexChangeEvent;
            import com.airsmth.defines.*;
            import com.airsmth.views.*;
            import com.airsmth.renders.*;
            
            protected function myList_changeHandler(event:IndexChangeEvent):void {
                navigator.pushView(com.airsmth.views.Home, threadList.selectedItem);
            }
            
            public function init():void {
                new BoardLoader(data as Board, threadList, prevBtn, nextBtn);
            }
            
            protected function next():void {
                var board:Board = data as Board;
                board.page = board.page + 1;
                navigator.replaceView(ThreadView, board);
            }
            
            protected function prev():void {
                var board:Board = data as Board;
                board.page = board.page - 1;
                navigator.replaceView(ThreadView, board);
            }
            
            protected function last():void {
                var board:Board = data as Board;
                board.page = 0;
                navigator.replaceView(ThreadView, board);
            }

        ]]>
    </fx:Script>
    <fx:Declarations>
        <s:ArrayCollection id="data"/>
    </fx:Declarations>
    <s:navigationContent>
        <s:Button icon="@Embed(source='../../../assets/back.png')" click="navigator.popView()" />
        <s:Button icon="@Embed(source='../../../assets/prev.png')" click="prev()" id="prevBtn" />
        <s:Button icon="@Embed(source='../../../assets/next.png')" click="next()" id="nextBtn" />
        <s:Button icon="@Embed(source='../../../assets/forward.png')" click="last()" id="lastBtn" />
    </s:navigationContent>
    <s:List id="threadList"
        width="100%" height="100%"
        change="navigator.pushView(PostView, threadList.selectedItem)"
        itemRendererFunction="RenderUtil.selectRenderer" />
</s:View>